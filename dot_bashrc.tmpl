# History settings

shopt -s histappend # append, don't overwrite history
export PROMPT_COMMAND="history -a" # write history when displaying prompt
export LC_CTYPE=en_US.UTF-8 # For possible non-ASCII filenames

# Coloration of Command Prompt and 'ls'
# includes magic sequence \033k\033\\ at beginning
# for the purposes of `screen` and \033[7h
# to allow for good line wrapping
export PS1="\[\033k\033\\\033[7h\]\W \\$ "
export PS1="\[\e[1;30m\]\W\[\e[m\] \\$ "
export CLICOLOR=1

{{ if eq .chezmoi.os "darwin" }}
# This is BSD color format
export LSCOLORS=cxfxdxdxbxehehbhbhchch
{{ else if eq .chezmoi.os "linux" }}
export LS_COLORS="${LS_COLORS}:di=32:ln=35:so=33:pi=33:ex=31:bd=34;47:cd=34;47:su=31;47:sg=31;47:tw=32;47:ow=32;47"
{{ end }}

[ -f "${HOME}/.bash_aliases" ] && source "${HOME}/.bash_aliases"
[ -f "${HOME}/.git-completion.bash" ] && source "${HOME}/.git-completion.bash"

if command -v fzf >/dev/null; then
    eval "$(fzf  --bash)"
fi
export FZF_DEFAULT_COMMAND='rg --files --hidden'

if command -v mise >/dev/null; then
    eval "$(mise activate bash)"
fi
[ -f "${HOME}/.cargo/env" ] && source "${HOME}/.cargo/env"
[ -f "${HOME}/.bashrc_local" ] && source "${HOME}/.bashrc_local"

if command -v jj >/dev/null; then
    jj --version
    source <(jj util completion bash)
fi

if command -v nvim >/dev/null; then
    export EDITOR=nvim
elif command -v vim >/dev/null; then
    export EDITOR=vim
fi

export PYTHONSTARTUP="${HOME}/.pythonrc"
